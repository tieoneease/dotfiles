# Dotfiles

Personal dotfiles managed with GNU Stow. Covers EndeavourOS (Niri + Noctalia Shell) and macOS (Aerospace).

## Quick Start (EndeavourOS)

```bash
git clone git@github.com:tieoneease/dotfiles.git ~/dotfiles
cd ~/dotfiles
./arch_setup.sh
# Reboot to start niri via greetd
```

The setup script installs all packages (via yay), configures system services (keyd, greetd), stows dotfiles, and sets up zsh/rust/claude.

## Quick Start (macOS)

```bash
git clone git@github.com:tieoneease/dotfiles.git ~/dotfiles
cd ~/dotfiles
./macos_setup.sh
./stow/stow_dotfiles.sh
```

## Architecture (EndeavourOS)

| Component | Role |
|-----------|------|
| **Niri** | Scrollable tiling Wayland compositor |
| **Noctalia Shell** | Desktop shell — bar, launcher, notifications, Material Design 3 theming |
| **keyd** | Keyboard daemon — tap-hold numpad, tab nav, arrow layers |
| **greetd + tuigreet** | Login greeter → launches niri-session |
| **Alacritty** | Primary terminal (dynamic wallpaper-based colors) |
| **Kitty** | Secondary terminal |

See [NIRI-SETUP.md](NIRI-SETUP.md) for detailed architecture documentation.

## Stow Structure

Each package mirrors `$HOME`. Stow creates symlinks from `~/` into the repo:

```
dotfiles/
├── nvim/.config/nvim/          → ~/.config/nvim/
├── kitty/.config/kitty/        → ~/.config/kitty/
├── alacritty/.config/alacritty/→ ~/.config/alacritty/
├── tmux/.config/tmux/          → ~/.config/tmux/
├── tms/.config/tms/            → ~/.config/tms/
├── zsh/.zshenv                 → ~/.zshenv
├── zsh/.config/zsh/            → ~/.config/zsh/ (base.zsh, aliases.zsh)
├── starship/.config/starship.toml → ~/.config/starship.toml
├── fontconfig/.config/fontconfig/ → ~/.config/fontconfig/
├── direnv/.config/direnv/      → ~/.config/direnv/
├── nix/.config/nix/            → ~/.config/nix/
├── niri/.config/niri/          → ~/.config/niri/
├── noctalia/.config/noctalia/  → ~/.config/noctalia/
├── aerospace/.config/aerospace/→ ~/.config/aerospace/ (macOS)
├── sketchybar/.config/sketchybar/ → ~/.config/sketchybar/ (macOS)
├── karabiner/.config/karabiner/→ ~/.config/karabiner/ (macOS)
├── etc/                        → copied to /etc/ by setup script (not stowed)
├── claude/                     → copied to ~/.claude/ by setup script (not stowed)
└── stow/                       → helper scripts (not stowed)
```

## Zsh Configuration

Layered to keep the repo clean while allowing installer additions:

- **`~/.zshenv`** (tracked) — Nix, NVM, Cargo env setup
- **`~/.config/zsh/base.zsh`** (tracked) — history, completion, plugins, starship, direnv
- **`~/.config/zsh/aliases.zsh`** (tracked) — all aliases
- **`~/.zshrc`** (NOT tracked) — generated by setup script; sources base.zsh; installers append here

## Nix + direnv

Nix and nix-direnv are installed automatically by `arch_setup.sh`. For projects using Nix flakes, add a `.envrc` with:

```bash
use flake
```

Then run `direnv allow`. nix-direnv caches the flake environment so subsequent shell entries are instant.

## License

MIT
